(this["webpackJsonpreact-hooks-mock-code-challenge-plantshop"]=this["webpackJsonpreact-hooks-mock-code-challenge-plantshop"]||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var c=n(2),a=n(8),r=n.n(a),s=(n(16),n(3)),i=n(0),o=Object(c.createContext)();function l(t){var e=t.children,n=Object(c.useState)({plants:[],users:[],cart:[]}),a=Object(s.a)(n,2),r=a[0],l=a[1];return Object(i.jsx)(o.Provider,{value:{store:r,setStore:l},children:e})}var j=function(){return Object(i.jsx)("header",{children:Object(i.jsxs)("h1",{children:["Plantsy",Object(i.jsx)("span",{className:"logo",role:"img",children:"\ud83c\udf31"})]})})},u=n(11),h=n(6),b=n(1),O=n(9),d=n(10),p=function(){function t(e){Object(O.a)(this,t),this.host="http://34.68.72.145:8080/",this.host+="".concat(e),console.log(this.host)}return Object(d.a)(t,[{key:"all",get:function(){return fetch(this.host).then((function(t){return t.json()}))}},{key:"create",value:function(t){return fetch(this.host,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}))}},{key:"update",value:function(t,e){return fetch("".concat(this.host,"/").concat(t),{method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}))}},{key:"delete",value:function(t){return fetch("".concat(this.host,"/").concat(t),{method:"DELETE"}).then((function(t){return t.json()}))}},{key:"search",value:function(t){return fetch("".concat(this.host,"?q=").concat(t)).then((function(t){return t.json()}))}}]),t}(),f=new p("plants");var m=function(){var t=Object(c.useContext)(o),e=t.store,n=t.setStore,a=Object(c.useState)({name:"",image:"",price:0}),r=Object(s.a)(a,2),l=r[0],j=r[1];function O(t){j(Object(b.a)(Object(b.a)({},l),{},Object(h.a)({},t.target.name,t.target.value)))}return Object(c.useEffect)((function(){e.plantInEdit?j(e.plantInEdit):j({name:"",image:"",price:0})}),[e]),Object(i.jsxs)("div",{className:"new-plant-form",children:[Object(i.jsx)("h2",{children:e.plantInEdit?"Edit Plant":"New Plant"}),Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.plantInEdit?(n(Object(b.a)(Object(b.a)({},e),{},{savingPlant:!0})),f.update(e.plantInEdit.id,l).then((function(t){n((function(n){var c=Object(b.a)({},n),a=c.plants.findIndex((function(t){return t.id==e.plantInEdit.id}));return a>-1&&(c.plants[a]=t),Object(b.a)(Object(b.a)({},c),{},{plantInEdit:t,savingPlant:!1})}))}))):f.create(l).then((function(t){n(Object(b.a)(Object(b.a)({},e),{},{plants:[].concat(Object(u.a)(e.plants),[t])}))}))},children:[Object(i.jsx)("input",{type:"text",name:"name",placeholder:"Plant name",onChange:O,value:l.name}),Object(i.jsx)("input",{type:"text",name:"image",placeholder:"Image URL",onChange:O,value:l.image}),Object(i.jsx)("input",{type:"number",name:"price",step:"0.01",placeholder:"Price",onChange:O,value:l.price}),e.savingPlant?Object(i.jsx)("div",{children:"Saving..."}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("button",{type:"submit",children:[e.plantInEdit?"Edit":"Add"," Plant"]}),e.plantInEdit&&Object(i.jsx)("button",{onClick:function(){n(Object(b.a)(Object(b.a)({},e),{},{plantInEdit:null}))},children:" Cancel Edit "})]})]})]})};var x=function(t){var e=t.plant,n=Object(c.useContext)(o),a=n.store,r=n.setStore,l=Object(c.useState)(!0),j=Object(s.a)(l,2),u=j[0],h=j[1];function O(){h(!u)}return Object(i.jsxs)("li",{className:"card",children:[Object(i.jsx)("img",{src:void 0==e.image?"https://via.placeholder.com/400":e.image,alt:"plant name"}),Object(i.jsx)("h4",{children:e.name}),Object(i.jsxs)("p",{children:["Price: ",e.price," ",Object(i.jsx)("button",{onClick:function(){r(Object(b.a)(Object(b.a)({},a),{},{plantInEdit:e}))},children:"Edit Price"})," "]}),u?Object(i.jsx)("button",{className:"primary",onClick:O,children:"In Stock"}):Object(i.jsx)("button",{onClick:O,children:"Out of Stock"})]})},v=new p("plants");var g=function(){var t=Object(c.useContext)(o),e=t.store,n=t.setStore;return Object(c.useEffect)((function(){v.all.then((function(t){return n(Object(b.a)(Object(b.a)({},e),{},{plants:t}))}))}),[]),Object(i.jsx)("ul",{className:"cards",children:e.plants.map((function(t){return Object(i.jsx)(x,{plant:t},t.id)}))})},E=new p("plants");var y=function(){var t=Object(c.useContext)(o),e=t.store,n=t.setStore,a=Object(c.useState)(""),r=Object(s.a)(a,2),l=r[0],j=r[1];return Object(i.jsxs)("div",{className:"searchbar",children:[Object(i.jsx)("label",{htmlFor:"search",children:"Search Plants:"}),Object(i.jsx)("input",{type:"text",id:"search",placeholder:"Type a name to search...",value:l,onChange:function(t){j(t.target.value),""==l?E.all.then((function(t){return n(Object(b.a)(Object(b.a)({},e),{},{plants:t}))})):E.search(l).then((function(t){n(Object(b.a)(Object(b.a)({},e),{},{plants:t}))}))}}),""!=l&&Object(i.jsx)("button",{onClick:function(){j(""),E.all.then((function(t){return n(Object(b.a)(Object(b.a)({},e),{},{plants:t}))}))},children:"Clear Search"})]})};var C=function(){return Object(i.jsxs)("main",{children:[Object(i.jsx)(m,{}),Object(i.jsx)(y,{}),Object(i.jsx)(g,{})]})};var k=function(){return Object(i.jsx)(l,{children:Object(i.jsxs)("div",{className:"app",children:[Object(i.jsx)(j,{}),Object(i.jsx)(C,{})]})})};r.a.render(Object(i.jsx)(k,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.16b000a1.chunk.js.map